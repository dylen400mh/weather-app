(()=>{"use strict";const t=(()=>{const t=document.querySelector("input"),e=document.getElementById("location"),n=document.getElementById("temperature"),o=document.getElementById("condition"),i=document.getElementById("feels-like"),r=document.getElementById("humidity"),a=document.getElementById("wind"),c=document.getElementById("wind-direction"),d=document.getElementById("precipitation"),l=document.getElementById("last-updated"),u=document.getElementById("error"),m=document.getElementById("toggle-units");function s(){t.value=""}function p(t,e=""){t?(u.textContent=e,u.style.display="block"):u.style.display="none"}return{updateDisplay:function(t,u){var g;s(),p(!1),g=u,m.textContent="Metric"===g?"Imperial":"Metric";const{location:y,current:h}=t;e.textContent=`${y.name}, ${y.region}, ${y.country}`,o.textContent=h.condition.text,r.textContent=`Humidity: ${h.humidity}`,c.textContent=`Wind Direction: ${h.wind_dir}`,l.textContent=`Last Updated: ${h.last_updated}`,n.textContent="Metric"===u?`${h.temp_c} 째C`:`${h.temp_f} 째F`,a.textContent="Metric"===u?`Wind: ${h.wind_kph} kph`:`Wind: ${h.wind_mph} mph`,i.textContent="Metric"===u?`Feels Like: ${h.feelslike_c} 째C`:`Feels Like: ${h.feelslike_f} 째F`,d.textContent="Metric"===u?`Precipitation: ${h.precip_mm} mm`:`Precipitation: ${h.precip_in} in`},resetInput:s,toggleError:p}})(),e=function(){return new Promise(((t,e)=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition((e=>{const{latitude:n,longitude:o}=e.coords;t([n,o])}),(()=>{t(null)})):e(new Error("Geolocation is not available in this browser."))}))},n=(()=>{const o=document.querySelector("form"),i=document.getElementById("current-location"),r=document.getElementById("toggle-units"),a=document.getElementById("temperature"),c=document.getElementById("location");let d="Metric";function l(){d="Metric"===d?"Imperial":"Metric"}async function u(e){try{const t=await fetch(`https://api.weatherapi.com/v1/current.json?key=fda6ad22a48445cabbe213714230208&q=${e}`,{mode:"cors"});return await t.json()}catch(e){throw t.toggleError(!0,e.message),e}}return o.addEventListener("submit",(e=>{e.preventDefault();const n=e.target.querySelector("input").value;n&&u(n).then((e=>{try{t.updateDisplay(e,d)}catch{t.toggleError(!0,e.error.message)}}))})),i.addEventListener("click",(async()=>{const[o,i]=await e();n.getWeatherData(`${o},${i}`).then((e=>{t.updateDisplay(e,d)}))})),a.addEventListener("click",(()=>{l(),n.getWeatherData(c.textContent).then((e=>{t.updateDisplay(e,d)}))})),r.addEventListener("click",(()=>{l(),n.getWeatherData(c.textContent).then((e=>{t.updateDisplay(e,d)}))})),{getWeatherData:u}})(),o=n;e().then((e=>{if(e){const[n,i]=[e[0],e[1]];o.getWeatherData(`${n},${i}`).then((e=>{t.updateDisplay(e,"Metric")}))}else o.getWeatherData("toronto").then((e=>{t.updateDisplay(e,"Metric")}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWMsU0FBU2MsTUFDMUNoQixHQUNGOEQsRUFBZTlELEdBQU93RSxNQUFNQyxJQUMxQixJQUVFLEVBQUlsRCxjQUFja0QsRUFBTWQsRUFDMUIsQ0FBRSxNQUVBLEVBQUkxQyxhQUFZLEVBQU13RCxFQUFLTixNQUFNaEQsUUFDbkMsSUFFSixJQUdGdUMsRUFBc0JVLGlCQUFpQixTQUFTUCxVQUM5QyxNQUFPVCxFQUFVQyxTQUFtQixJQUVwQ0csRUFBSU0sZUFBZSxHQUFHVixLQUFZQyxLQUFhbUIsTUFBTUMsSUFDbkQsRUFBSWxELGNBQWNrRCxFQUFNZCxFQUFNLEdBQzlCLElBR0p0RCxFQUFxQitELGlCQUFpQixTQUFTLEtBQzdDUixJQUNBSixFQUFJTSxlQUFlbkMsRUFBU1AsYUFBYW9ELE1BQU1DLElBQzdDLEVBQUlsRCxjQUFja0QsRUFBTWQsRUFBTSxHQUM5QixJQUdKN0MsRUFBa0JzRCxpQkFBaUIsU0FBUyxLQUMxQ1IsSUFDQUosRUFBSU0sZUFBZW5DLEVBQVNQLGFBQWFvRCxNQUFNQyxJQUM3QyxFQUFJbEQsY0FBY2tELEVBQU1kLEVBQU0sR0FDOUIsSUFHRyxDQUFFRyxpQkFDVixFQXRFVyxHQXdFWixJQ3RFQSxJQUEwQlUsTUFBTUUsSUFFOUIsR0FBSUEsRUFBYSxDQUNmLE1BQU90QixFQUFVQyxHQUFhLENBQUNxQixFQUFZLEdBQUlBLEVBQVksSUFFM0QsRUFBSVosZUFBZSxHQUFHVixLQUFZQyxLQUFhbUIsTUFBTUMsSUFDbkQsRUFBSWxELGNBQWNrRCxFQUFNLFNBQVMsR0FFckMsTUFDRSxFQUFJWCxlQUFlLFdBQVdVLE1BQU1DLElBQ2xDLEVBQUlsRCxjQUFja0QsRUFBTSxTQUFTLEdBRXJDLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvbG9jYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvYXBwLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IERPTSA9ICgoKSA9PiB7XHJcbiAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XHJcbiAgY29uc3QgbG9jYXRpb25Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvY2F0aW9uXCIpO1xyXG4gIGNvbnN0IHRlbXBlcmF0dXJlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZW1wZXJhdHVyZVwiKTtcclxuICBjb25zdCBjb25kaXRpb25Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmRpdGlvblwiKTtcclxuICBjb25zdCBmZWVsc0xpa2VDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZlZWxzLWxpa2VcIik7XHJcbiAgY29uc3QgaHVtaWRpdHlDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImh1bWlkaXR5XCIpO1xyXG4gIGNvbnN0IHdpbmRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndpbmRcIik7XHJcbiAgY29uc3Qgd2luZERpcmVjdGlvbkNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2luZC1kaXJlY3Rpb25cIik7XHJcbiAgY29uc3QgcHJlY2lwaXRhdGlvbkNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJlY2lwaXRhdGlvblwiKTtcclxuICBjb25zdCBsYXN0VXBkYXRlZENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGFzdC11cGRhdGVkXCIpO1xyXG4gIGNvbnN0IGVycm9yTWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXJyb3JcIik7XHJcbiAgY29uc3QgdG9nZ2xlVW5pdHNCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZ2dsZS11bml0c1wiKTtcclxuXHJcbiAgZnVuY3Rpb24gcmVzZXRJbnB1dCgpIHtcclxuICAgIGlucHV0LnZhbHVlID0gXCJcIjtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRvZ2dsZUVycm9yKHNob3dFcnJvciwgbWVzc2FnZSA9IFwiXCIpIHtcclxuICAgIGlmIChzaG93RXJyb3IpIHtcclxuICAgICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gbWVzc2FnZTtcclxuICAgICAgZXJyb3JNZXNzYWdlLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlcnJvck1lc3NhZ2Uuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2xlYXJGaWVsZHMoKSB7XHJcbiAgICByZXNldElucHV0KCk7XHJcbiAgICB0b2dnbGVFcnJvcihmYWxzZSk7XHJcbiAgfVxyXG5cclxuICAvLyB0b2dnbGUgdW5pdHMgYnV0dG9uIHRleHQgc2hvdWxkIGJlIG9wcG9zaXRlIHRvIHdoYXQgaXMgY3VycmVudGx5IHNlbGVjdGVkXHJcbiAgZnVuY3Rpb24gc2V0VG9nZ2xlVW5pdHNCdXR0b25UZXh0KHNlbGVjdGVkVW5pdCkge1xyXG4gICAgdG9nZ2xlVW5pdHNCdXR0b24udGV4dENvbnRlbnQgPVxyXG4gICAgICBzZWxlY3RlZFVuaXQgPT09IFwiTWV0cmljXCIgPyBcIkltcGVyaWFsXCIgOiBcIk1ldHJpY1wiO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlRGlzcGxheSh3ZWF0aGVyRGF0YSwgdW5pdCkge1xyXG4gICAgLy8gY2xlYXIgZXhpc3RpbmcgZmllbGRzXHJcbiAgICBjbGVhckZpZWxkcygpO1xyXG5cclxuICAgIC8vIHVwZGF0ZSB0b2dnbGUgdW5pdHMgYnV0dG9uXHJcbiAgICBzZXRUb2dnbGVVbml0c0J1dHRvblRleHQodW5pdCk7XHJcblxyXG4gICAgY29uc3QgeyBsb2NhdGlvbiwgY3VycmVudCB9ID0gd2VhdGhlckRhdGE7XHJcblxyXG4gICAgbG9jYXRpb25Db250YWluZXIudGV4dENvbnRlbnQgPSBgJHtsb2NhdGlvbi5uYW1lfSwgJHtsb2NhdGlvbi5yZWdpb259LCAke2xvY2F0aW9uLmNvdW50cnl9YDtcclxuICAgIGNvbmRpdGlvbkNvbnRhaW5lci50ZXh0Q29udGVudCA9IGN1cnJlbnQuY29uZGl0aW9uLnRleHQ7XHJcbiAgICBodW1pZGl0eUNvbnRhaW5lci50ZXh0Q29udGVudCA9IGBIdW1pZGl0eTogJHtjdXJyZW50Lmh1bWlkaXR5fWA7XHJcbiAgICB3aW5kRGlyZWN0aW9uQ29udGFpbmVyLnRleHRDb250ZW50ID0gYFdpbmQgRGlyZWN0aW9uOiAke2N1cnJlbnQud2luZF9kaXJ9YDtcclxuICAgIGxhc3RVcGRhdGVkQ29udGFpbmVyLnRleHRDb250ZW50ID0gYExhc3QgVXBkYXRlZDogJHtjdXJyZW50Lmxhc3RfdXBkYXRlZH1gO1xyXG5cclxuICAgIHRlbXBlcmF0dXJlQ29udGFpbmVyLnRleHRDb250ZW50ID1cclxuICAgICAgdW5pdCA9PT0gXCJNZXRyaWNcIiA/IGAke2N1cnJlbnQudGVtcF9jfSDCsENgIDogYCR7Y3VycmVudC50ZW1wX2Z9IMKwRmA7XHJcblxyXG4gICAgd2luZENvbnRhaW5lci50ZXh0Q29udGVudCA9XHJcbiAgICAgIHVuaXQgPT09IFwiTWV0cmljXCJcclxuICAgICAgICA/IGBXaW5kOiAke2N1cnJlbnQud2luZF9rcGh9IGtwaGBcclxuICAgICAgICA6IGBXaW5kOiAke2N1cnJlbnQud2luZF9tcGh9IG1waGA7XHJcblxyXG4gICAgZmVlbHNMaWtlQ29udGFpbmVyLnRleHRDb250ZW50ID1cclxuICAgICAgdW5pdCA9PT0gXCJNZXRyaWNcIlxyXG4gICAgICAgID8gYEZlZWxzIExpa2U6ICR7Y3VycmVudC5mZWVsc2xpa2VfY30gwrBDYFxyXG4gICAgICAgIDogYEZlZWxzIExpa2U6ICR7Y3VycmVudC5mZWVsc2xpa2VfZn0gwrBGYDtcclxuXHJcbiAgICBwcmVjaXBpdGF0aW9uQ29udGFpbmVyLnRleHRDb250ZW50ID1cclxuICAgICAgdW5pdCA9PT0gXCJNZXRyaWNcIlxyXG4gICAgICAgID8gYFByZWNpcGl0YXRpb246ICR7Y3VycmVudC5wcmVjaXBfbW19IG1tYFxyXG4gICAgICAgIDogYFByZWNpcGl0YXRpb246ICR7Y3VycmVudC5wcmVjaXBfaW59IGluYDtcclxuICB9XHJcblxyXG4gIHJldHVybiB7IHVwZGF0ZURpc3BsYXksIHJlc2V0SW5wdXQsIHRvZ2dsZUVycm9yIH07XHJcbn0pKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBET007XHJcbiIsImNvbnN0IExvY2F0aW9uID0gKCgpID0+IHtcclxuICBmdW5jdGlvbiBnZXRDb29yZGluYXRlcygpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmIChcImdlb2xvY2F0aW9uXCIgaW4gbmF2aWdhdG9yKSB7XHJcbiAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihcclxuICAgICAgICAgIChwb3NpdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZSBjb29yZGluYXRlc1xyXG4gICAgICAgICAgICBjb25zdCB7IGxhdGl0dWRlLCBsb25naXR1ZGUgfSA9IHBvc2l0aW9uLmNvb3JkcztcclxuICAgICAgICAgICAgcmVzb2x2ZShbbGF0aXR1ZGUsIGxvbmdpdHVkZV0pO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgLy8gU2V0IHJlc29sdmUgcGFyYW1ldGVyIHRvIG51bGwgaWYgdW5hYmxlIHRvIGdldCBjb29yZGluYXRlc1xyXG4gICAgICAgICAgICByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIkdlb2xvY2F0aW9uIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBicm93c2VyLlwiKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgZ2V0Q29vcmRpbmF0ZXMgfTtcclxufSkoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IExvY2F0aW9uO1xyXG4iLCJpbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiO1xyXG5pbXBvcnQgTG9jYXRpb24gZnJvbSBcIi4vbG9jYXRpb25cIjtcclxuXHJcbmNvbnN0IEFwcCA9ICgoKSA9PiB7XHJcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xyXG4gIGNvbnN0IGN1cnJlbnRMb2NhdGlvbkJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3VycmVudC1sb2NhdGlvblwiKTtcclxuICBjb25zdCB0b2dnbGVVbml0c0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9nZ2xlLXVuaXRzXCIpO1xyXG4gIGNvbnN0IHRlbXBlcmF0dXJlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZW1wZXJhdHVyZVwiKTtcclxuICBjb25zdCBsb2NhdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9jYXRpb25cIik7XHJcblxyXG4gIC8vIHVuaXRzIGFyZSBzZXQgYXMgbWV0cmljIGJ5IGRlZmF1bHRcclxuICBsZXQgdW5pdHMgPSBcIk1ldHJpY1wiO1xyXG5cclxuICAvLyB0b2dnbGUgdW5pdHNcclxuICBmdW5jdGlvbiB0b2dnbGVVbml0cygpIHtcclxuICAgIHVuaXRzID0gdW5pdHMgPT09IFwiTWV0cmljXCIgPyBcIkltcGVyaWFsXCIgOiBcIk1ldHJpY1wiO1xyXG4gIH1cclxuXHJcbiAgLy8gZ2V0cyB3ZWF0aGVyIGRhdGEgYmFzZWQgb24gY2l0eS9wcm92aW5jZS9jb3VudHJ5IG9yIGNvb3JkaW5hdGVzXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNoYWRvd1xyXG4gIGFzeW5jIGZ1bmN0aW9uIGdldFdlYXRoZXJEYXRhKGxvY2F0aW9uKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgICAgIGBodHRwczovL2FwaS53ZWF0aGVyYXBpLmNvbS92MS9jdXJyZW50Lmpzb24/a2V5PWZkYTZhZDIyYTQ4NDQ1Y2FiYmUyMTM3MTQyMzAyMDgmcT0ke2xvY2F0aW9ufWAsXHJcbiAgICAgICAgeyBtb2RlOiBcImNvcnNcIiB9XHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgRE9NLnRvZ2dsZUVycm9yKHRydWUsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgaW5wdXQgPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikudmFsdWU7XHJcbiAgICBpZiAoaW5wdXQpIHtcclxuICAgICAgZ2V0V2VhdGhlckRhdGEoaW5wdXQpLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgLy8gdXBkYXRlIGRpc3BsYXlcclxuICAgICAgICAgIERPTS51cGRhdGVEaXNwbGF5KGRhdGEsIHVuaXRzKTtcclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgIC8vIGRpc3BsYXkgZXJyb3IgbWVzc2FnZVxyXG4gICAgICAgICAgRE9NLnRvZ2dsZUVycm9yKHRydWUsIGRhdGEuZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgY3VycmVudExvY2F0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBbbGF0aXR1ZGUsIGxvbmdpdHVkZV0gPSBhd2FpdCBMb2NhdGlvbi5nZXRDb29yZGluYXRlcygpO1xyXG5cclxuICAgIEFwcC5nZXRXZWF0aGVyRGF0YShgJHtsYXRpdHVkZX0sJHtsb25naXR1ZGV9YCkudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICBET00udXBkYXRlRGlzcGxheShkYXRhLCB1bml0cyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgdGVtcGVyYXR1cmVDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHRvZ2dsZVVuaXRzKCk7XHJcbiAgICBBcHAuZ2V0V2VhdGhlckRhdGEobG9jYXRpb24udGV4dENvbnRlbnQpLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgRE9NLnVwZGF0ZURpc3BsYXkoZGF0YSwgdW5pdHMpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIHRvZ2dsZVVuaXRzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICB0b2dnbGVVbml0cygpO1xyXG4gICAgQXBwLmdldFdlYXRoZXJEYXRhKGxvY2F0aW9uLnRleHRDb250ZW50KS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIERPTS51cGRhdGVEaXNwbGF5KGRhdGEsIHVuaXRzKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4geyBnZXRXZWF0aGVyRGF0YSB9O1xyXG59KSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBwO1xyXG4iLCJpbXBvcnQgQXBwIGZyb20gXCIuL2FwcFwiO1xyXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiO1xyXG5pbXBvcnQgTG9jYXRpb24gZnJvbSBcIi4vbG9jYXRpb25cIjtcclxuXHJcbi8vIGdldCBjb29yZGluYXRlcyB1c2luZyBHZW9Mb2NhdGlvbiBBUEkgYW5kIHVzZSB0aG9zZSBjb29yZHMgdG8gc2V0IGRlZmF1bHQgbG9jYXRpb24gb24gcGFnZSBsb2FkICh1bml0cyB3aWxsIGJlIG1ldHJpYyBvbiBkZWZhdWx0KVxyXG5Mb2NhdGlvbi5nZXRDb29yZGluYXRlcygpLnRoZW4oKGNvb3JkaW5hdGVzKSA9PiB7XHJcbiAgLy8gaWYgY29vcmRpbmF0ZXMgd2VyZSBmb3VuZCwgc2VhcmNoIHdpdGggdGhlbSwgb3RoZXJ3aXNlLCBzZWFyY2ggZm9yIGEgJ2RlZmF1bHQnIGxvY2F0aW9uXHJcbiAgaWYgKGNvb3JkaW5hdGVzKSB7XHJcbiAgICBjb25zdCBbbGF0aXR1ZGUsIGxvbmdpdHVkZV0gPSBbY29vcmRpbmF0ZXNbMF0sIGNvb3JkaW5hdGVzWzFdXTtcclxuXHJcbiAgICBBcHAuZ2V0V2VhdGhlckRhdGEoYCR7bGF0aXR1ZGV9LCR7bG9uZ2l0dWRlfWApLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgRE9NLnVwZGF0ZURpc3BsYXkoZGF0YSwgXCJNZXRyaWNcIik7XHJcbiAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgQXBwLmdldFdlYXRoZXJEYXRhKFwidG9yb250b1wiKS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIERPTS51cGRhdGVEaXNwbGF5KGRhdGEsIFwiTWV0cmljXCIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuIl0sIm5hbWVzIjpbImlucHV0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibG9jYXRpb25Db250YWluZXIiLCJnZXRFbGVtZW50QnlJZCIsInRlbXBlcmF0dXJlQ29udGFpbmVyIiwiY29uZGl0aW9uQ29udGFpbmVyIiwiZmVlbHNMaWtlQ29udGFpbmVyIiwiaHVtaWRpdHlDb250YWluZXIiLCJ3aW5kQ29udGFpbmVyIiwid2luZERpcmVjdGlvbkNvbnRhaW5lciIsInByZWNpcGl0YXRpb25Db250YWluZXIiLCJsYXN0VXBkYXRlZENvbnRhaW5lciIsImVycm9yTWVzc2FnZSIsInRvZ2dsZVVuaXRzQnV0dG9uIiwicmVzZXRJbnB1dCIsInZhbHVlIiwidG9nZ2xlRXJyb3IiLCJzaG93RXJyb3IiLCJtZXNzYWdlIiwidGV4dENvbnRlbnQiLCJzdHlsZSIsImRpc3BsYXkiLCJ1cGRhdGVEaXNwbGF5Iiwid2VhdGhlckRhdGEiLCJ1bml0Iiwic2VsZWN0ZWRVbml0IiwibG9jYXRpb24iLCJjdXJyZW50IiwibmFtZSIsInJlZ2lvbiIsImNvdW50cnkiLCJjb25kaXRpb24iLCJ0ZXh0IiwiaHVtaWRpdHkiLCJ3aW5kX2RpciIsImxhc3RfdXBkYXRlZCIsInRlbXBfYyIsInRlbXBfZiIsIndpbmRfa3BoIiwid2luZF9tcGgiLCJmZWVsc2xpa2VfYyIsImZlZWxzbGlrZV9mIiwicHJlY2lwX21tIiwicHJlY2lwX2luIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJuYXZpZ2F0b3IiLCJnZW9sb2NhdGlvbiIsImdldEN1cnJlbnRQb3NpdGlvbiIsInBvc2l0aW9uIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJjb29yZHMiLCJFcnJvciIsIkFwcCIsImZvcm0iLCJjdXJyZW50TG9jYXRpb25CdXR0b24iLCJ1bml0cyIsInRvZ2dsZVVuaXRzIiwiYXN5bmMiLCJnZXRXZWF0aGVyRGF0YSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtb2RlIiwianNvbiIsImVycm9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldCIsInRoZW4iLCJkYXRhIiwiY29vcmRpbmF0ZXMiXSwic291cmNlUm9vdCI6IiJ9