(()=>{"use strict";const t=(()=>{const t=document.querySelector("input"),e=document.getElementById("location"),n=document.getElementById("temperature"),o=document.getElementById("condition"),i=document.getElementById("feels-like"),r=document.getElementById("humidity"),c=document.getElementById("wind"),a=document.getElementById("wind-direction"),d=document.getElementById("precipitation"),l=document.getElementById("last-updated"),u=document.getElementById("error"),m=document.getElementById("toggle-units");function s(){t.value=""}function p(t,e=""){t?(u.textContent=e,u.style.display="block"):u.style.display="none"}return{updateDisplay:function(t,u){var g;s(),p(!1),g=u,m.textContent="Metric"===g?"Imperial":"Metric";const y=t.current,{location:h}=t;e.textContent=`${h.name}, ${h.region}, ${h.country}`,o.textContent=y.condition.text,r.textContent=`Humidity: ${y.humidity}`,a.textContent=`Wind Direction: ${y.wind_dir}`,l.textContent=`Last Updated: ${y.last_updated}`,"Metric"===u&&(n.textContent=`${y.temp_c} 째C`,c.textContent=`Wind: ${y.wind_kph} kph`,i.textContent=`Feels Like: ${y.feelslike_c} 째C`,d.textContent=`Precipitation: ${y.precip_mm} mm`),"Imperial"===u&&(n.textContent=`${y.temp_f} 째F`,c.textContent=`Wind: ${y.wind_mph} mph`,i.textContent=`Feels Like: ${y.feelslike_f} 째F`,d.textContent=`Precipitation: ${y.precip_in} in`)},resetInput:s,toggleError:p}})(),e=function(){return new Promise(((t,e)=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((e=>{const{latitude:n,longitude:o}=e.coords;t([n,o])}),(t=>{e(t)}))}))},n=(()=>{const o=document.querySelector("form"),i=document.getElementById("current-location"),r=document.getElementById("toggle-units"),c=document.getElementById("location");let a="Metric";async function d(e){try{const t=await fetch(`https://api.weatherapi.com/v1/current.json?key=fda6ad22a48445cabbe213714230208&q=${e}`,{mode:"cors"});return await t.json()}catch(e){throw t.toggleError(!0,e.message),e}}return o.addEventListener("submit",(e=>{e.preventDefault();const n=e.target.querySelector("input").value;n&&d(n).then((e=>{try{t.updateDisplay(e,a)}catch{t.toggleError(!0,e.error.message)}}))})),i.addEventListener("click",(async()=>{const[o,i]=await e();n.getWeatherData(`${o},${i}`).then((e=>{t.updateDisplay(e,a)}))})),r.addEventListener("click",(()=>{a="Metric"===a?"Imperial":"Metric",n.getWeatherData(c.textContent).then((e=>{t.updateDisplay(e,a)}))})),{getWeatherData:d}})(),o=n;e().then((e=>{const[n,i]=[e[0],e[1]];o.getWeatherData(`${n},${i}`).then((e=>{t.updateDisplay(e,"Metric")}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBRUUsRUFBSWpELGNBQWNpRCxFQUFNWixFQUMxQixDQUFFLE1BRUEsRUFBSTNDLGFBQVksRUFBTXVELEVBQUtoQixNQUFNckMsUUFDbkMsSUFFSixJQUdGd0MsRUFBc0JRLGlCQUFpQixTQUFTTixVQUM5QyxNQUFPUixFQUFVQyxTQUFtQixJQUVwQ0csRUFBSUssZUFBZSxHQUFHVCxLQUFZQyxLQUFhaUIsTUFBTUMsSUFDbkQsRUFBSWpELGNBQWNpRCxFQUFNWixFQUFNLEdBQzlCLElBR0o5QyxFQUFrQnFELGlCQUFpQixTQUFTLEtBM0MxQ1AsRUFBa0IsV0FBVkEsRUFBcUIsV0FBYSxTQTZDMUNILEVBQUlLLGVBQWVqQyxFQUFTVCxhQUFhbUQsTUFBTUMsSUFDN0MsRUFBSWpELGNBQWNpRCxFQUFNWixFQUFNLEdBQzlCLElBR0csQ0FBRUUsaUJBQ1YsRUE5RFcsR0FnRVosSUM5REEsSUFBMEJTLE1BQU1FLElBQzlCLE1BQU9wQixFQUFVQyxHQUFhLENBQUNtQixFQUFZLEdBQUlBLEVBQVksSUFFM0QsRUFBSVgsZUFBZSxHQUFHVCxLQUFZQyxLQUFhaUIsTUFBTUMsSUFDbkQsRUFBSWpELGNBQWNpRCxFQUFNLFNBQVMsR0FDakMsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2RvbS5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9sb2NhdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9hcHAuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgRE9NID0gKCgpID0+IHtcclxuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcclxuICBjb25zdCBsb2NhdGlvbkNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9jYXRpb25cIik7XHJcbiAgY29uc3QgdGVtcGVyYXR1cmVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRlbXBlcmF0dXJlXCIpO1xyXG4gIGNvbnN0IGNvbmRpdGlvbkNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZGl0aW9uXCIpO1xyXG4gIGNvbnN0IGZlZWxzTGlrZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmVlbHMtbGlrZVwiKTtcclxuICBjb25zdCBodW1pZGl0eUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaHVtaWRpdHlcIik7XHJcbiAgY29uc3Qgd2luZENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2luZFwiKTtcclxuICBjb25zdCB3aW5kRGlyZWN0aW9uQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3aW5kLWRpcmVjdGlvblwiKTtcclxuICBjb25zdCBwcmVjaXBpdGF0aW9uQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmVjaXBpdGF0aW9uXCIpO1xyXG4gIGNvbnN0IGxhc3RVcGRhdGVkQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsYXN0LXVwZGF0ZWRcIik7XHJcbiAgY29uc3QgZXJyb3JNZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlcnJvclwiKTtcclxuICBjb25zdCB0b2dnbGVVbml0c0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9nZ2xlLXVuaXRzXCIpO1xyXG5cclxuICBmdW5jdGlvbiByZXNldElucHV0KCkge1xyXG4gICAgaW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdG9nZ2xlRXJyb3Ioc2hvd0Vycm9yLCBtZXNzYWdlID0gXCJcIikge1xyXG4gICAgaWYgKHNob3dFcnJvcikge1xyXG4gICAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xyXG4gICAgICBlcnJvck1lc3NhZ2Uuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVycm9yTWVzc2FnZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjbGVhckZpZWxkcygpIHtcclxuICAgIHJlc2V0SW5wdXQoKTtcclxuICAgIHRvZ2dsZUVycm9yKGZhbHNlKTtcclxuICB9XHJcblxyXG4gIC8vIHRvZ2dsZSB1bml0cyBidXR0b24gdGV4dCBzaG91bGQgYmUgb3Bwb3NpdGUgdG8gd2hhdCBpcyBjdXJyZW50bHkgc2VsZWN0ZWRcclxuICBmdW5jdGlvbiBzZXRUb2dnbGVVbml0c0J1dHRvblRleHQoc2VsZWN0ZWRVbml0KSB7XHJcbiAgICB0b2dnbGVVbml0c0J1dHRvbi50ZXh0Q29udGVudCA9XHJcbiAgICAgIHNlbGVjdGVkVW5pdCA9PT0gXCJNZXRyaWNcIiA/IFwiSW1wZXJpYWxcIiA6IFwiTWV0cmljXCI7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5KHdlYXRoZXJEYXRhLCB1bml0KSB7XHJcbiAgICAvLyBjbGVhciBleGlzdGluZyBmaWVsZHNcclxuICAgIGNsZWFyRmllbGRzKCk7XHJcblxyXG4gICAgLy8gdXBkYXRlIHRvZ2dsZSB1bml0cyBidXR0b25cclxuICAgIHNldFRvZ2dsZVVuaXRzQnV0dG9uVGV4dCh1bml0KTtcclxuXHJcbiAgICBjb25zdCB3ZWF0aGVyID0gd2VhdGhlckRhdGEuY3VycmVudDtcclxuICAgIGNvbnN0IHsgbG9jYXRpb24gfSA9IHdlYXRoZXJEYXRhO1xyXG5cclxuICAgIGxvY2F0aW9uQ29udGFpbmVyLnRleHRDb250ZW50ID0gYCR7bG9jYXRpb24ubmFtZX0sICR7bG9jYXRpb24ucmVnaW9ufSwgJHtsb2NhdGlvbi5jb3VudHJ5fWA7XHJcbiAgICBjb25kaXRpb25Db250YWluZXIudGV4dENvbnRlbnQgPSB3ZWF0aGVyLmNvbmRpdGlvbi50ZXh0O1xyXG4gICAgaHVtaWRpdHlDb250YWluZXIudGV4dENvbnRlbnQgPSBgSHVtaWRpdHk6ICR7d2VhdGhlci5odW1pZGl0eX1gO1xyXG4gICAgd2luZERpcmVjdGlvbkNvbnRhaW5lci50ZXh0Q29udGVudCA9IGBXaW5kIERpcmVjdGlvbjogJHt3ZWF0aGVyLndpbmRfZGlyfWA7XHJcbiAgICBsYXN0VXBkYXRlZENvbnRhaW5lci50ZXh0Q29udGVudCA9IGBMYXN0IFVwZGF0ZWQ6ICR7d2VhdGhlci5sYXN0X3VwZGF0ZWR9YDtcclxuXHJcbiAgICBpZiAodW5pdCA9PT0gXCJNZXRyaWNcIikge1xyXG4gICAgICB0ZW1wZXJhdHVyZUNvbnRhaW5lci50ZXh0Q29udGVudCA9IGAke3dlYXRoZXIudGVtcF9jfSDCsENgO1xyXG4gICAgICB3aW5kQ29udGFpbmVyLnRleHRDb250ZW50ID0gYFdpbmQ6ICR7d2VhdGhlci53aW5kX2twaH0ga3BoYDtcclxuICAgICAgZmVlbHNMaWtlQ29udGFpbmVyLnRleHRDb250ZW50ID0gYEZlZWxzIExpa2U6ICR7d2VhdGhlci5mZWVsc2xpa2VfY30gwrBDYDtcclxuICAgICAgcHJlY2lwaXRhdGlvbkNvbnRhaW5lci50ZXh0Q29udGVudCA9IGBQcmVjaXBpdGF0aW9uOiAke3dlYXRoZXIucHJlY2lwX21tfSBtbWA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHVuaXQgPT09IFwiSW1wZXJpYWxcIikge1xyXG4gICAgICB0ZW1wZXJhdHVyZUNvbnRhaW5lci50ZXh0Q29udGVudCA9IGAke3dlYXRoZXIudGVtcF9mfSDCsEZgO1xyXG4gICAgICB3aW5kQ29udGFpbmVyLnRleHRDb250ZW50ID0gYFdpbmQ6ICR7d2VhdGhlci53aW5kX21waH0gbXBoYDtcclxuICAgICAgZmVlbHNMaWtlQ29udGFpbmVyLnRleHRDb250ZW50ID0gYEZlZWxzIExpa2U6ICR7d2VhdGhlci5mZWVsc2xpa2VfZn0gwrBGYDtcclxuICAgICAgcHJlY2lwaXRhdGlvbkNvbnRhaW5lci50ZXh0Q29udGVudCA9IGBQcmVjaXBpdGF0aW9uOiAke3dlYXRoZXIucHJlY2lwX2lufSBpbmA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4geyB1cGRhdGVEaXNwbGF5LCByZXNldElucHV0LCB0b2dnbGVFcnJvciB9O1xyXG59KSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRE9NO1xyXG4iLCJjb25zdCBMb2NhdGlvbiA9ICgoKSA9PiB7XHJcbiAgZnVuY3Rpb24gZ2V0Q29vcmRpbmF0ZXMoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBpZiAoXCJnZW9sb2NhdGlvblwiIGluIG5hdmlnYXRvcikge1xyXG4gICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oXHJcbiAgICAgICAgICAocG9zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgLy8gUmV0cmlldmUgdGhlIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUgY29vcmRpbmF0ZXNcclxuICAgICAgICAgICAgY29uc3QgeyBsYXRpdHVkZSwgbG9uZ2l0dWRlIH0gPSBwb3NpdGlvbi5jb29yZHM7XHJcbiAgICAgICAgICAgIHJlc29sdmUoW2xhdGl0dWRlLCBsb25naXR1ZGVdKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiB7IGdldENvb3JkaW5hdGVzIH07XHJcbn0pKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBMb2NhdGlvbjtcclxuIiwiaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIjtcclxuaW1wb3J0IExvY2F0aW9uIGZyb20gXCIuL2xvY2F0aW9uXCI7XHJcblxyXG5jb25zdCBBcHAgPSAoKCkgPT4ge1xyXG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcclxuICBjb25zdCBjdXJyZW50TG9jYXRpb25CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImN1cnJlbnQtbG9jYXRpb25cIik7XHJcbiAgY29uc3QgdG9nZ2xlVW5pdHNCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZ2dsZS11bml0c1wiKTtcclxuICBjb25zdCBsb2NhdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9jYXRpb25cIik7XHJcblxyXG4gIC8vIHVuaXRzIGFyZSBzZXQgYXMgbWV0cmljIGJ5IGRlZmF1bHRcclxuICBsZXQgdW5pdHMgPSBcIk1ldHJpY1wiO1xyXG5cclxuICAvLyB0b2dnbGUgdW5pdHNcclxuICBmdW5jdGlvbiB0b2dnbGVVbml0cygpIHtcclxuICAgIHVuaXRzID0gdW5pdHMgPT09IFwiTWV0cmljXCIgPyBcIkltcGVyaWFsXCIgOiBcIk1ldHJpY1wiO1xyXG4gIH1cclxuXHJcbiAgLy8gZ2V0cyB3ZWF0aGVyIGRhdGEgYmFzZWQgb24gY2l0eS9wcm92aW5jZS9jb3VudHJ5IG9yIGNvb3JkaW5hdGVzXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNoYWRvd1xyXG4gIGFzeW5jIGZ1bmN0aW9uIGdldFdlYXRoZXJEYXRhKGxvY2F0aW9uKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgICAgIGBodHRwczovL2FwaS53ZWF0aGVyYXBpLmNvbS92MS9jdXJyZW50Lmpzb24/a2V5PWZkYTZhZDIyYTQ4NDQ1Y2FiYmUyMTM3MTQyMzAyMDgmcT0ke2xvY2F0aW9ufWAsXHJcbiAgICAgICAgeyBtb2RlOiBcImNvcnNcIiB9XHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgRE9NLnRvZ2dsZUVycm9yKHRydWUsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgaW5wdXQgPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikudmFsdWU7XHJcbiAgICBpZiAoaW5wdXQpIHtcclxuICAgICAgZ2V0V2VhdGhlckRhdGEoaW5wdXQpLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgLy8gdXBkYXRlIGRpc3BsYXlcclxuICAgICAgICAgIERPTS51cGRhdGVEaXNwbGF5KGRhdGEsIHVuaXRzKTtcclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgIC8vIGRpc3BsYXkgZXJyb3IgbWVzc2FnZVxyXG4gICAgICAgICAgRE9NLnRvZ2dsZUVycm9yKHRydWUsIGRhdGEuZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgY3VycmVudExvY2F0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBbbGF0aXR1ZGUsIGxvbmdpdHVkZV0gPSBhd2FpdCBMb2NhdGlvbi5nZXRDb29yZGluYXRlcygpO1xyXG5cclxuICAgIEFwcC5nZXRXZWF0aGVyRGF0YShgJHtsYXRpdHVkZX0sJHtsb25naXR1ZGV9YCkudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICBET00udXBkYXRlRGlzcGxheShkYXRhLCB1bml0cyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgdG9nZ2xlVW5pdHNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHRvZ2dsZVVuaXRzKCk7XHJcbiAgICBBcHAuZ2V0V2VhdGhlckRhdGEobG9jYXRpb24udGV4dENvbnRlbnQpLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgRE9NLnVwZGF0ZURpc3BsYXkoZGF0YSwgdW5pdHMpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiB7IGdldFdlYXRoZXJEYXRhIH07XHJcbn0pKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBcHA7XHJcbiIsImltcG9ydCBBcHAgZnJvbSBcIi4vYXBwXCI7XHJcbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCI7XHJcbmltcG9ydCBMb2NhdGlvbiBmcm9tIFwiLi9sb2NhdGlvblwiO1xyXG5cclxuLy8gZ2V0IGNvb3JkaW5hdGVzIHVzaW5nIEdlb0xvY2F0aW9uIEFQSSBhbmQgdXNlIHRob3NlIGNvb3JkcyB0byBzZXQgZGVmYXVsdCBsb2NhdGlvbiBvbiBwYWdlIGxvYWQgKHVuaXRzIHdpbGwgYmUgbWV0cmljIG9uIGRlZmF1bHQpXHJcbkxvY2F0aW9uLmdldENvb3JkaW5hdGVzKCkudGhlbigoY29vcmRpbmF0ZXMpID0+IHtcclxuICBjb25zdCBbbGF0aXR1ZGUsIGxvbmdpdHVkZV0gPSBbY29vcmRpbmF0ZXNbMF0sIGNvb3JkaW5hdGVzWzFdXTtcclxuXHJcbiAgQXBwLmdldFdlYXRoZXJEYXRhKGAke2xhdGl0dWRlfSwke2xvbmdpdHVkZX1gKS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICBET00udXBkYXRlRGlzcGxheShkYXRhLCBcIk1ldHJpY1wiKTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJuYW1lcyI6WyJpbnB1dCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImxvY2F0aW9uQ29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJ0ZW1wZXJhdHVyZUNvbnRhaW5lciIsImNvbmRpdGlvbkNvbnRhaW5lciIsImZlZWxzTGlrZUNvbnRhaW5lciIsImh1bWlkaXR5Q29udGFpbmVyIiwid2luZENvbnRhaW5lciIsIndpbmREaXJlY3Rpb25Db250YWluZXIiLCJwcmVjaXBpdGF0aW9uQ29udGFpbmVyIiwibGFzdFVwZGF0ZWRDb250YWluZXIiLCJlcnJvck1lc3NhZ2UiLCJ0b2dnbGVVbml0c0J1dHRvbiIsInJlc2V0SW5wdXQiLCJ2YWx1ZSIsInRvZ2dsZUVycm9yIiwic2hvd0Vycm9yIiwibWVzc2FnZSIsInRleHRDb250ZW50Iiwic3R5bGUiLCJkaXNwbGF5IiwidXBkYXRlRGlzcGxheSIsIndlYXRoZXJEYXRhIiwidW5pdCIsInNlbGVjdGVkVW5pdCIsIndlYXRoZXIiLCJjdXJyZW50IiwibG9jYXRpb24iLCJuYW1lIiwicmVnaW9uIiwiY291bnRyeSIsImNvbmRpdGlvbiIsInRleHQiLCJodW1pZGl0eSIsIndpbmRfZGlyIiwibGFzdF91cGRhdGVkIiwidGVtcF9jIiwid2luZF9rcGgiLCJmZWVsc2xpa2VfYyIsInByZWNpcF9tbSIsInRlbXBfZiIsIndpbmRfbXBoIiwiZmVlbHNsaWtlX2YiLCJwcmVjaXBfaW4iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIm5hdmlnYXRvciIsImdlb2xvY2F0aW9uIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwicG9zaXRpb24iLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImNvb3JkcyIsImVycm9yIiwiQXBwIiwiZm9ybSIsImN1cnJlbnRMb2NhdGlvbkJ1dHRvbiIsInVuaXRzIiwiYXN5bmMiLCJnZXRXZWF0aGVyRGF0YSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtb2RlIiwianNvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJ0aGVuIiwiZGF0YSIsImNvb3JkaW5hdGVzIl0sInNvdXJjZVJvb3QiOiIifQ==